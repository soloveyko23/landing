(()=>{var e={144:function(e){e.exports=function(){"use strict";const e="undefined"!=typeof window,t=e&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),s=e&&window.devicePixelRatio>1,i={elements_selector:".lazy",container:t||e?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_bg_set:"bg-set",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1,restore_on_error:!1},a=e=>Object.assign({},i,e),o=function(e,t){let s;const i="LazyLoad::Initialized",a=new e(t);try{s=new CustomEvent(i,{detail:{instance:a}})}catch(e){s=document.createEvent("CustomEvent"),s.initCustomEvent(i,!1,!1,{instance:a})}window.dispatchEvent(s)},n="src",l="srcset",r="sizes",c="poster",d="llOriginalAttrs",u="data",m="loading",h="loaded",p="applied",g="error",_="native",f="data-",b="ll-status",v=(e,t)=>e.getAttribute(f+t),w=e=>v(e,b),y=(e,t)=>((e,t,s)=>{const i=f+t;null!==s?e.setAttribute(i,s):e.removeAttribute(i)})(e,b,t),E=e=>y(e,null),I=e=>null===w(e),L=e=>w(e)===_,C=[m,h,p,g],k=(e,t,s,i)=>{e&&"function"==typeof e&&(void 0===i?void 0===s?e(t):e(t,s):e(t,s,i))},A=(t,s)=>{e&&""!==s&&t.classList.add(s)},x=(t,s)=>{e&&""!==s&&t.classList.remove(s)},S=e=>e.llTempImage,M=(e,t)=>{if(!t)return;const s=t._observer;s&&s.unobserve(e)},T=(e,t)=>{e&&(e.loadingCount+=t)},q=(e,t)=>{e&&(e.toLoadCount=t)},G=e=>{let t=[];for(let s,i=0;s=e.children[i];i+=1)"SOURCE"===s.tagName&&t.push(s);return t},O=(e,t)=>{const s=e.parentNode;s&&"PICTURE"===s.tagName&&G(s).forEach(t)},B=(e,t)=>{G(e).forEach(t)},D=[n],P=[n,c],F=[n,l,r],z=[u],N=e=>!!e[d],$=e=>e[d],H=e=>delete e[d],R=(e,t)=>{if(N(e))return;const s={};t.forEach((t=>{s[t]=e.getAttribute(t)})),e[d]=s},V=(e,t)=>{if(!N(e))return;const s=$(e);t.forEach((t=>{((e,t,s)=>{s?e.setAttribute(t,s):e.removeAttribute(t)})(e,t,s[t])}))},X=(e,t,s)=>{A(e,t.class_applied),y(e,p),s&&(t.unobserve_completed&&M(e,t),k(t.callback_applied,e,s))},Y=(e,t,s)=>{A(e,t.class_loading),y(e,m),s&&(T(s,1),k(t.callback_loading,e,s))},j=(e,t,s)=>{s&&e.setAttribute(t,s)},J=(e,t)=>{j(e,r,v(e,t.data_sizes)),j(e,l,v(e,t.data_srcset)),j(e,n,v(e,t.data_src))},U={IMG:(e,t)=>{O(e,(e=>{R(e,F),J(e,t)})),R(e,F),J(e,t)},IFRAME:(e,t)=>{R(e,D),j(e,n,v(e,t.data_src))},VIDEO:(e,t)=>{B(e,(e=>{R(e,D),j(e,n,v(e,t.data_src))})),R(e,P),j(e,c,v(e,t.data_poster)),j(e,n,v(e,t.data_src)),e.load()},OBJECT:(e,t)=>{R(e,z),j(e,u,v(e,t.data_src))}},W=["IMG","IFRAME","VIDEO","OBJECT"],K=(e,t)=>{!t||(e=>e.loadingCount>0)(t)||(e=>e.toLoadCount>0)(t)||k(e.callback_finish,t)},Q=(e,t,s)=>{e.addEventListener(t,s),e.llEvLisnrs[t]=s},Z=(e,t,s)=>{e.removeEventListener(t,s)},ee=e=>!!e.llEvLisnrs,te=e=>{if(!ee(e))return;const t=e.llEvLisnrs;for(let s in t){const i=t[s];Z(e,s,i)}delete e.llEvLisnrs},se=(e,t,s)=>{(e=>{delete e.llTempImage})(e),T(s,-1),(e=>{e&&(e.toLoadCount-=1)})(s),x(e,t.class_loading),t.unobserve_completed&&M(e,s)},ie=(e,t,s)=>{const i=S(e)||e;ee(i)||((e,t,s)=>{ee(e)||(e.llEvLisnrs={});const i="VIDEO"===e.tagName?"loadeddata":"load";Q(e,i,t),Q(e,"error",s)})(i,(a=>{((e,t,s,i)=>{const a=L(t);se(t,s,i),A(t,s.class_loaded),y(t,h),k(s.callback_loaded,t,i),a||K(s,i)})(0,e,t,s),te(i)}),(a=>{((e,t,s,i)=>{const a=L(t);se(t,s,i),A(t,s.class_error),y(t,g),k(s.callback_error,t,i),s.restore_on_error&&V(t,F),a||K(s,i)})(0,e,t,s),te(i)}))},ae=(e,t,i)=>{(e=>W.indexOf(e.tagName)>-1)(e)?((e,t,s)=>{ie(e,t,s),((e,t,s)=>{const i=U[e.tagName];i&&(i(e,t),Y(e,t,s))})(e,t,s)})(e,t,i):((e,t,i)=>{(e=>{e.llTempImage=document.createElement("IMG")})(e),ie(e,t,i),(e=>{N(e)||(e[d]={backgroundImage:e.style.backgroundImage})})(e),((e,t,i)=>{const a=v(e,t.data_bg),o=v(e,t.data_bg_hidpi),l=s&&o?o:a;l&&(e.style.backgroundImage=`url("${l}")`,S(e).setAttribute(n,l),Y(e,t,i))})(e,t,i),((e,t,i)=>{const a=v(e,t.data_bg_multi),o=v(e,t.data_bg_multi_hidpi),n=s&&o?o:a;n&&(e.style.backgroundImage=n,X(e,t,i))})(e,t,i),((e,t,s)=>{const i=v(e,t.data_bg_set);if(!i)return;let a=i.split("|").map((e=>`image-set(${e})`));e.style.backgroundImage=a.join(),X(e,t,s)})(e,t,i)})(e,t,i)},oe=e=>{e.removeAttribute(n),e.removeAttribute(l),e.removeAttribute(r)},ne=e=>{O(e,(e=>{V(e,F)})),V(e,F)},le={IMG:ne,IFRAME:e=>{V(e,D)},VIDEO:e=>{B(e,(e=>{V(e,D)})),V(e,P),e.load()},OBJECT:e=>{V(e,z)}},re=(e,t)=>{(e=>{const t=le[e.tagName];t?t(e):(e=>{if(!N(e))return;const t=$(e);e.style.backgroundImage=t.backgroundImage})(e)})(e),((e,t)=>{I(e)||L(e)||(x(e,t.class_entered),x(e,t.class_exited),x(e,t.class_applied),x(e,t.class_loading),x(e,t.class_loaded),x(e,t.class_error))})(e,t),E(e),H(e)},ce=["IMG","IFRAME","VIDEO"],de=e=>e.use_native&&"loading"in HTMLImageElement.prototype,ue=(e,t,s)=>{e.forEach((e=>(e=>e.isIntersecting||e.intersectionRatio>0)(e)?((e,t,s,i)=>{const a=(e=>C.indexOf(w(e))>=0)(e);y(e,"entered"),A(e,s.class_entered),x(e,s.class_exited),((e,t,s)=>{t.unobserve_entered&&M(e,s)})(e,s,i),k(s.callback_enter,e,t,i),a||ae(e,s,i)})(e.target,e,t,s):((e,t,s,i)=>{I(e)||(A(e,s.class_exited),((e,t,s,i)=>{s.cancel_on_exit&&(e=>w(e)===m)(e)&&"IMG"===e.tagName&&(te(e),(e=>{O(e,(e=>{oe(e)})),oe(e)})(e),ne(e),x(e,s.class_loading),T(i,-1),E(e),k(s.callback_cancel,e,t,i))})(e,t,s,i),k(s.callback_exit,e,t,i))})(e.target,e,t,s)))},me=e=>Array.prototype.slice.call(e),he=e=>e.container.querySelectorAll(e.elements_selector),pe=e=>(e=>w(e)===g)(e),ge=(e,t)=>(e=>me(e).filter(I))(e||he(t)),_e=function(t,s){const i=a(t);this._settings=i,this.loadingCount=0,((e,t)=>{de(e)||(t._observer=new IntersectionObserver((s=>{ue(s,e,t)}),(e=>({root:e.container===document?null:e.container,rootMargin:e.thresholds||e.threshold+"px"}))(e)))})(i,this),((t,s)=>{e&&(s._onlineHandler=()=>{((e,t)=>{var s;(s=he(e),me(s).filter(pe)).forEach((t=>{x(t,e.class_error),E(t)})),t.update()})(t,s)},window.addEventListener("online",s._onlineHandler))})(i,this),this.update(s)};return _e.prototype={update:function(e){const s=this._settings,i=ge(e,s);var a,o;q(this,i.length),t?this.loadAll(i):de(s)?((e,t,s)=>{e.forEach((e=>{-1!==ce.indexOf(e.tagName)&&((e,t,s)=>{e.setAttribute("loading","lazy"),ie(e,t,s),((e,t)=>{const s=U[e.tagName];s&&s(e,t)})(e,t),y(e,_)})(e,t,s)})),q(s,0)})(i,s,this):(o=i,(e=>{e.disconnect()})(a=this._observer),((e,t)=>{t.forEach((t=>{e.observe(t)}))})(a,o))},destroy:function(){this._observer&&this._observer.disconnect(),e&&window.removeEventListener("online",this._onlineHandler),he(this._settings).forEach((e=>{H(e)})),delete this._observer,delete this._settings,delete this._onlineHandler,delete this.loadingCount,delete this.toLoadCount},loadAll:function(e){const t=this._settings;ge(e,t).forEach((e=>{M(e,this),ae(e,t,this)}))},restoreAll:function(){const e=this._settings;he(e).forEach((t=>{re(t,e)}))}},_e.load=(e,t)=>{const s=a(t);ae(e,s)},_e.resetStatus=e=>{E(e)},e&&((e,t)=>{if(t)if(t.length)for(let s,i=0;s=t[i];i+=1)o(e,s);else o(e,t)})(_e,window.lazyLoadOptions),_e}()}},t={};function s(i){var a=t[i];if(void 0!==a)return a.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,s),o.exports}(()=>{"use strict";const e={};e.mousePrlx=new class{constructor(e,t=null){if(this.config=Object.assign({init:!0,logging:!0},e),this.config.init){const e=document.querySelectorAll("[data-prlx-mouse]");e.length?(this.paralaxMouseInit(e),this.setLogging(`Прокинувся, стежу за об'єктами: (${e.length})`)):this.setLogging("Немає жодного обєкта. Сплю...")}}paralaxMouseInit(e){e.forEach((e=>{const t=e.closest("[data-prlx-mouse-wrapper]"),s=e.dataset.prlxCx?+e.dataset.prlxCx:100,i=e.dataset.prlxCy?+e.dataset.prlxCy:100,a=e.hasAttribute("data-prlx-dxr")?-1:1,o=e.hasAttribute("data-prlx-dyr")?-1:1,n=e.dataset.prlxA?+e.dataset.prlxA:50;let l=0,r=0,c=0,d=0;function u(t=window){t.addEventListener("mousemove",(function(t){const s=e.getBoundingClientRect().top+window.scrollY;if(s>=window.scrollY||s+e.offsetHeight>=window.scrollY){const e=window.innerWidth,s=window.innerHeight,i=t.clientX-e/2,a=t.clientY-s/2;c=i/e*100,d=a/s*100}}))}!function t(){l+=(c-l)*n/1e3,r+=(d-r)*n/1e3,e.style.cssText=`transform: translate3D(${a*l/(s/10)}%,${o*r/(i/10)}%,0) rotate(0.02deg);`,requestAnimationFrame(t)}(),t?u(t):u()}))}setLogging(e){this.config.logging&&function(e){setTimeout((()=>{window.FLS&&console.log(e)}),0)}(`[PRLX Mouse]: ${e}`)}}({});new(s(144))({elements_selector:"[src],[srcset]",class_loaded:"_lazy-loaded",use_native:!0});let t=!1;setTimeout((()=>{if(t){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0);class i{constructor(){this.gameContainer=document.querySelector(".game-container"),this.gameElement=this.gameContainer?this.gameContainer.querySelector(".page__game"):null,this.items=this.gameElement?Array.from(this.gameElement.querySelectorAll(".game__item")):[],this.playButton=document.getElementById("startGameBtn"),this.bonusBigImage="img/bonus/prize-gold.webp",this.bonusMedImage="img/bonus/prize-med.webp",this.initialImages=[],this.clicksMade=0,this.isFirstGame=!0,this.isAnimating=!1,this.firstClickedItem=null,this.firstClickedThimble=null,this.shuffleCount=10,this.shuffleDelay=500,this.clickDelay=1e3,this.boundHandleItemClick=this.handleItemClick.bind(this),this.init()}init(){this.playButton&&this.playButton.addEventListener("click",(()=>this.startGame())),this.saveInitialImages(),this.disableItemClick()}saveInitialImages(){this.initialImages=this.items.map((e=>{const t=e.querySelector(".game__item .game__bonus-ball img");return t?t.dataset.src||t.src:""}))}startGame(){if(this.isAnimating||!this.gameContainer||!this.items.length)return void console.error("Game is already animating or container/items not found");this.isAnimating=!0,this.gameContainer.classList.remove("choose-item"),this.playButton&&this.playButton.classList.add("button-hidden"),this.disableItemClick(),this.gameContainer.classList.add("start-game");const e=this.shuffleDelay;setTimeout((()=>{this.performShuffles(this.shuffleCount)}),e)}performShuffles(e){let t=0;const s=()=>{t<e?(this.shuffleItems(),t++,setTimeout(s,this.shuffleDelay)):setTimeout((()=>{this.isAnimating=!1,this.enableItemClick(),this.addChooseItemClass()}),this.shuffleDelay)};s()}shuffleItems(){const e=this.items.length,t=Array.from({length:e},((e,t)=>t)),s=this.shuffleArray([...t]);this.items.forEach(((e,t)=>{const i=s[t];e.style.transform=this.getTransform(t,i)}))}shuffleArray(e){for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e}getTransform(e,t){const s=t-e;if(0===s)return"translateX(0)";if(window.matchMedia("(max-width: 480px)").matches){return`translateX(${100*s+"%"})`}return`translateX(${`calc(${100*s}% + ${3*s}vmin)`})`}enableItemClick(){this.items.forEach((e=>{e.addEventListener("click",this.boundHandleItemClick),e.style.cursor="pointer"}))}disableItemClick(){this.items.forEach((e=>{e.removeEventListener("click",this.boundHandleItemClick),e.style.cursor="default"}))}handleItemClick(e){if(this.isAnimating||this.clicksMade>=2)return;const t=e.currentTarget;t&&!t.classList.contains("item-active")&&(this.isAnimating=!0,this.disableItemClick(),setTimeout((()=>{const e=t.querySelector(".game__bonus-ball img");if(e){const t=this.isFirstGame?this.bonusBigImage:this.bonusMedImage;e.src=t}t.classList.add("item-active");const s=t.querySelector(".game__thimble");s&&(s.style.opacity="0"),this.clicksMade++,1===this.clicksMade&&this.isFirstGame&&s&&(this.firstClickedThimble=s),setTimeout((()=>{this.showPopupStage(this.clicksMade),this.isAnimating=!1}),500)}),0))}showPopupStage(e){this.hideAllPopups();const t=document.querySelector(`[data-popup-stage="${e}"]`);if(t){document.documentElement.classList.add("popup-show"),t.classList.add("popup_show");const e=t.querySelector(".button-next-game");e&&e.addEventListener("click",(()=>{this.closePopup(t),this.endGameStage()}),{once:!0})}else console.warn(`Popup for stage ${e} not found.`),this.endGameStage()}hideAllPopups(){document.querySelectorAll("[data-popup-stage].popup_show").forEach((e=>{e.classList.remove("popup_show")})),0===document.querySelectorAll("[data-popup-stage].popup_show").length&&document.documentElement.classList.remove("popup-show")}closePopup(e){e&&(e.classList.remove("popup_show"),0===document.querySelectorAll("[data-popup-stage].popup_show").length&&document.documentElement.classList.remove("popup-show"))}addChooseItemClass(){this.gameContainer&&this.gameContainer.classList.add("choose-item")}endGameStage(){this.gameContainer.classList.remove("choose-item"),1===this.clicksMade&&this.isFirstGame?(this.isFirstGame=!1,this.firstClickedThimble&&(this.firstClickedThimble.style.opacity="",this.firstClickedThimble=null),this.gameContainer.classList.remove("start-game"),this.restoreInitialImages(),this.resetItemPositions(),this.updateTranslation(),this.playButton&&this.playButton.classList.remove("button-hidden")):2===this.clicksMade&&(this.isFirstGame=!0,this.clicksMade=0,this.firstClickedThimble=null,this.restoreInitialImages(),this.resetItemPositions(),this.gameContainer.classList.remove("start-game"),this.playButton&&this.playButton.classList.remove("button-hidden"),this.updateTranslation())}restoreInitialImages(){this.items.forEach(((e,t)=>{const s=e.querySelector(".game__bonus-ball img");if(s){const e=this.initialImages[t];s.src=e||""}}))}resetItemPositions(){this.items.forEach((e=>{e.style.transform="";const t=e.querySelector(".game__thimble");t&&(t.style.opacity=""),e.removeAttribute("data-index-item"),e.classList.remove("item-active")}))}updateTranslation(){window.deepl&&"function"==typeof window.deepl?window.deepl():console.warn("DeepL translation function not found.")}}document.addEventListener("DOMContentLoaded",(()=>{new i})),document.addEventListener("DOMContentLoaded",(()=>{(()=>{const e=document.querySelector(".page__button-play");e&&setInterval((()=>{e.classList.add("animate"),setTimeout((()=>{e.classList.remove("animate")}),3e3)}),8e3)})(),(()=>{const e=document.querySelector(".page__game");e&&setInterval((()=>{e.classList.add("animate"),e.classList.remove("start"),setTimeout((()=>{e.classList.remove("animate"),e.classList.add("start")}),3e3)}),15e3)})();const e=document.querySelector(".button-final-popup"),t=document.querySelector('[data-popup-stage="3"]');e&&t?e.addEventListener("click",(e=>{e.preventDefault();document.querySelectorAll("[data-popup-stage].popup_show").forEach((e=>{e.classList.remove("popup_show")})),0===document.querySelectorAll("[data-popup-stage].popup_show").length&&document.documentElement.classList.remove("popup-show"),document.documentElement.classList.add("popup-show"),t.classList.add("popup_show");const s=t.querySelector(".popup__close");if(s){const e=s.cloneNode(!0);s.parentNode.replaceChild(e,s),e.addEventListener("click",(()=>{t.classList.remove("popup_show"),0===document.querySelectorAll("[data-popup-stage].popup_show").length&&document.documentElement.classList.remove("popup-show")}),{once:!0})}})):(e||console.warn("Кнопка .button-final-popup не найдена."),t||console.warn('Попап [data-popup-stage="3"] не найден.'))})),window.FLS=!0})()})();